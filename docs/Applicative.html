<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Applicative Functor - PureScript For JavaScript Developers</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="how_to_use_this_booklet.html"><strong aria-hidden="true">1.</strong> How To Use This Booklet</a></li><li class="chapter-item expanded "><a href="Type_Classes.html"><strong aria-hidden="true">2.</strong> Type Classes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Show.html"><strong aria-hidden="true">2.1.</strong> Show</a></li><li class="chapter-item expanded "><a href="Eq.html"><strong aria-hidden="true">2.2.</strong> Eq</a></li><li class="chapter-item expanded "><a href="Ord.html"><strong aria-hidden="true">2.3.</strong> Ord</a></li><li class="chapter-item expanded "><a href="Semigroups-and-Monoids.html"><strong aria-hidden="true">2.4.</strong> Semigroups and Monoids</a></li><li class="chapter-item expanded "><a href="Foldable.html"><strong aria-hidden="true">2.5.</strong> Foldable</a></li><li class="chapter-item expanded "><a href="Functor.html"><strong aria-hidden="true">2.6.</strong> Functor</a></li><li class="chapter-item expanded "><a href="Applicative.html" class="active"><strong aria-hidden="true">2.7.</strong> Applicative Functor</a></li><li class="chapter-item expanded "><a href="Traversable_functor.html"><strong aria-hidden="true">2.8.</strong> Traversable Functor</a></li><li class="chapter-item expanded "><a href="Monads.html"><strong aria-hidden="true">2.9.</strong> Monads</a></li></ol></li><li class="chapter-item expanded "><a href="What_next.html"><strong aria-hidden="true">3.</strong> What's Next?</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">PureScript For JavaScript Developers</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="applicative-functors"><a class="header" href="#applicative-functors">Applicative Functors</a></h2>
<h3 id="javascript-context-validating-and-combining-form-inputs"><a class="header" href="#javascript-context-validating-and-combining-form-inputs">JavaScript Context: Validating and Combining Form Inputs</a></h3>
<p>In JavaScript, you often validate form inputs like first name, last name, and email before combining them into a user object. A common approach is using <code>null</code> checks:</p>
<pre><code class="language-javascript">function createUser(first, last, email) {
  if (first &amp;&amp; last &amp;&amp; email) {
    return { first, last, email };
  }
  return null;
}
console.log(createUser(&quot;Phillip&quot;, &quot;Freeman&quot;, &quot;phil@example.com&quot;)); // { first: &quot;Phillip&quot;, last: &quot;Freeman&quot;, email: &quot;phil@example.com&quot; }
console.log(createUser(&quot;Phillip&quot;, null, &quot;phil@example.com&quot;)); // null
</code></pre>
<p>This is straightforward but limited. To provide better feedback, you might validate each input and return a result with either the user object or errors, wrapping the result in a context:</p>
<pre><code class="language-javascript">function validateInput(value, field) {
  if (!value) return { valid: false, errors: [`${field} is required`] };
  if (field === &quot;email&quot; &amp;&amp; !value.includes(&quot;@&quot;)) return { valid: false, errors: [&quot;Valid email is required&quot;] };
  return { valid: true, value };
}
function createUserValidated(first, last, email) {
  const firstResult = validateInput(first, &quot;First name&quot;);
  const lastResult = validateInput(last, &quot;Last name&quot;);
  const emailResult = validateInput(email, &quot;Email&quot;);
  if (firstResult.valid &amp;&amp; lastResult.valid &amp;&amp; emailResult.valid) {
    return { valid: true, value: { first: firstResult.value, last: lastResult.value, email: emailResult.value } };
  }
  const errors = [];
  if (!firstResult.valid) errors.push(...firstResult.errors);
  if (!lastResult.valid) errors.push(...lastResult.errors);
  if (!emailResult.valid) errors.push(...emailResult.errors);
  return { valid: false, errors };
}
console.log(createUserValidated(&quot;Phillip&quot;, &quot;Freeman&quot;, &quot;phil@example.com&quot;)); 
// { valid: true, value: { first: &quot;Phillip&quot;, last: &quot;Freeman&quot;, email: &quot;phil@example.com&quot; } }
console.log(createUserValidated(&quot;Phillip&quot;, null, &quot;invalid&quot;)); 
// { valid: false, errors: [&quot;Last name is required&quot;, &quot;Valid email is required&quot;] }
</code></pre>
<p>This improved version applies <code>createUser</code> to validated inputs within a context (<code>{ valid, value }</code> or <code>{ errors }</code>), but it’s repetitive. You manually check each result, combine errors, and ensure types match. Extending this to other structures (e.g., arrays or async data) requires more custom code, and there’s no type safety to catch errors early, risking runtime issues if inputs are unexpected types.</p>
<h3 id="purescripts-applicative-structured-function-application"><a class="header" href="#purescripts-applicative-structured-function-application">PureScript’s <code>Applicative</code>: Structured Function Application</a></h3>
<p>PureScript’s <code>Applicative</code> type class builds on <code>Apply</code> (which itself builds on <code>Functor</code>) to apply functions inside containers (like optionals, arrays, or async computations) to values in other containers, with type safety. It’s defined as:</p>
<pre><code class="language-purescript">class Apply f &lt;= Applicative f where
  pure :: forall a. a -&gt; f a
</code></pre>
<p>The <code>Apply</code> type class, a prerequisite for <code>Applicative</code>, provides:</p>
<pre><code class="language-purescript">class Functor f &lt;= Apply f where
  apply :: forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
</code></pre>
<ul>
<li><code>pure</code> wraps a value or function into the container’s context. For example, with <code>Maybe</code>, <code>pure x = Just x</code>; with arrays, <code>pure x = [x]</code>. In Applicatives, <code>pure</code> lifts a regular function (like <code>createUser</code>) into the container (e.g., <code>Just createUser</code> or <code>[createUser]</code>) so it can be applied to wrapped values.</li>
<li><code>apply</code> (alias <code>&lt;*&gt;</code> ) takes a function in a container and applies it to a value in another container of the same type.</li>
</ul>
<p>The <code>pure</code> function is crucial: it takes a plain function, like <code>createUser :: String -&gt; String -&gt; String -&gt; { first :: String, last :: String, email :: String }</code>, and lifts it into the applicative context (e.g., <code>Just createUser</code> for <code>Maybe</code> or <code>[createUser]</code> for arrays). This enables <code>&lt;*&gt;</code> to apply the function to wrapped values, combining their effects (e.g., failing if any <code>Maybe</code> is <code>Nothing</code>, or generating all combinations for arrays).</p>
<p>For example, combining form inputs with <code>Maybe</code> (optional values):</p>
<p>In PSCi, paste (using <code>:paste</code> mode, then <code>Ctrl+D</code>):</p>
<pre><code class="language-purescript">import Prelude
import Effect.Console
import Data.Maybe
createUser first last email = { first, last, email }
logShow $ pure createUser &lt;*&gt; Just &quot;Phillip&quot; &lt;*&gt; Just &quot;Freeman&quot; &lt;*&gt; Just &quot;phil@example.com&quot; 
logShow $ pure createUser &lt;*&gt; Just &quot;Phillip&quot; &lt;*&gt; (Nothing :: Maybe String) &lt;*&gt; Just &quot;phil@example.com&quot; 
</code></pre>
<p>Expected output:</p>
<pre><code>(Just { first: &quot;Phillip&quot;, last: &quot;Freeman&quot;, email: &quot;phil@example.com&quot; })
unit
Nothing
unit
</code></pre>
<p>For arrays (applying to all combinations):</p>
<p>In PSCi, paste (using <code>:paste</code> mode, then <code>Ctrl+D</code>):</p>
<pre><code class="language-purescript">import Prelude
import Effect.Console
import Data.Array
createUser first last email = { first, last, email }
logShow $ pure createUser &lt;*&gt; [&quot;Phillip&quot;, &quot;Phil&quot;] &lt;*&gt; [&quot;Freeman&quot;, &quot;Smith&quot;] &lt;*&gt; [&quot;phil@example.com&quot;, &quot;psmith@example.com&quot;] 
</code></pre>
<p>Expected output:</p>
<pre><code>[{ first: &quot;Phillip&quot;, last: &quot;Freeman&quot;, email: &quot;phil@example.com&quot; },{ first: &quot;Phillip&quot;, last: &quot;Freeman&quot;, email: &quot;psmith@example.com&quot; },{ first: &quot;Phillip&quot;, last: &quot;Smith&quot;, email: &quot;phil@example.com&quot; },{ first: &quot;Phillip&quot;, last: &quot;Smith&quot;, email: &quot;psmith@example.com&quot; },{ first: &quot;Phil&quot;, last: &quot;Freeman&quot;, email: &quot;phil@example.com&quot; },{ first: &quot;Phil&quot;, last: &quot;Freeman&quot;, email: &quot;psmith@example.com&quot; },{ first: &quot;Phil&quot;, last: &quot;Smith&quot;, email: &quot;phil@example.com&quot; },{ first: &quot;Phil&quot;, last: &quot;Smith&quot;, email: &quot;psmith@example.com&quot; }]
unit
</code></pre>
<p>The compiler ensures <code>Applicative</code> instances exist and types match, catching errors at compile time. Applicative laws (identity, composition, homomorphism) ensure predictable behavior, unlike JavaScript’s manual checks.</p>
<h3 id="why-applicative-is-helpful"><a class="header" href="#why-applicative-is-helpful">Why <code>Applicative</code> Is Helpful</a></h3>
<ol>
<li>
<p><strong>Unified Function Application</strong>: Unlike JS’s repetitive <code>null</code> checks, <code>Applicative</code> applies functions in containers (like optionals, arrays, async computations) to values in containers uniformly, without manual conditionals.</p>
</li>
<li>
<p><strong>Type Safety</strong>: Ensures the function and values are compatible before running, avoiding JS runtime errors from missing or mismatched inputs.</p>
</li>
<li>
<p><strong>Reusable Code</strong>: One <code>apply</code> operator works across different structures, reducing custom code compared to JS’s type-specific checks.</p>
</li>
</ol>
<p>The <code>pure</code> function lifts <code>createUser</code> into <code>Maybe</code>, enabling <code>&lt;*&gt;</code> to apply it to optional values, similar to JavaScript’s validated checks but safer and more structured.</p>
<h3 id="repl-exercises"><a class="header" href="#repl-exercises">REPL Exercises</a></h3>
<p>Try these in a fresh PSCi session (run <code>:clear</code> first). Copy and paste each block using <code>:paste</code> mode (type <code>:paste</code>, paste the code, then press <code>Ctrl+D</code> to execute):</p>
<ol>
<li>
<p><strong>Apply with Maybe</strong>:</p>
<pre><code class="language-purescript">import Prelude
import Effect.Console
import Data.Maybe
createUser first last email = { first, last, email }
logShow $ pure createUser &lt;*&gt; Just &quot;Phillip&quot; &lt;*&gt; Just &quot;Freeman&quot; &lt;*&gt; Just &quot;phil@example.com&quot;
logShow $ pure createUser &lt;*&gt; Just &quot;Phillip&quot; &lt;*&gt; (Nothing :: Maybe String) &lt;*&gt; Just &quot;phil@example.com&quot; 
</code></pre>
<p>Expected output:</p>
<pre><code>(Just { first: &quot;Phillip&quot;, last: &quot;Freeman&quot;, email: &quot;phil@example.com&quot; })
unit
Nothing
unit
</code></pre>
</li>
<li>
<p><strong>Apply with Array</strong>:</p>
<pre><code class="language-purescript">import Prelude
import Effect.Console
import Data.Array
createUser first last email = { first, last, email }
logShow $ pure createUser &lt;*&gt; [&quot;Phillip&quot;, &quot;Phil&quot;] &lt;*&gt; [&quot;Freeman&quot;, &quot;Smith&quot;] &lt;*&gt; [&quot;phil@example.com&quot;, &quot;psmith@example.com&quot;]
</code></pre>
<p>Expected output:</p>
<pre><code>[{ first: &quot;Phillip&quot;, last: &quot;Freeman&quot;, email: &quot;phil@example.com&quot; },{ first: &quot;Phillip&quot;, last: &quot;Freeman&quot;, email: &quot;psmith@example.com&quot; },{ first: &quot;Phillip&quot;, last: &quot;Smith&quot;, email: &quot;phil@example.com&quot; },{ first: &quot;Phillip&quot;, last: &quot;Smith&quot;, email: &quot;psmith@example.com&quot; },{ first: &quot;Phil&quot;, last: &quot;Freeman&quot;, email: &quot;phil@example.com&quot; },{ first: &quot;Phil&quot;, last: &quot;Freeman&quot;, email: &quot;psmith@example.com&quot; },{ first: &quot;Phil&quot;, last: &quot;Smith&quot;, email: &quot;phil@example.com&quot; },{ first: &quot;Phil&quot;, last: &quot;Smith&quot;, email: &quot;psmith@example.com&quot; }]
unit
</code></pre>
</li>
<li>
<p><strong>Apply with Custom Type</strong>:</p>
<pre><code class="language-purescript"> import Prelude
 import Effect.Console
 newtype Point a = Point { x :: a, y :: a }
 instance Show a =&gt; Show (Point a) where
   show (Point p) = &quot;(Point &quot; &lt;&gt; show p.x &lt;&gt; &quot; &quot; &lt;&gt; show p.y &lt;&gt; &quot;)&quot;
 instance Functor Point where
   map f (Point p) = Point { x: f p.x, y: f p.y }
 instance Apply Point where
   apply (Point p) (Point q) = Point { x: p.x q.x, y: p.y q.y }
 instance Applicative Point where
   pure x = Point { x: x, y: x }
 logShow $ pure (\n -&gt; n * 2) &lt;*&gt; Point { x: 3, y: 4 } {- - Double coordinates with pure -}
</code></pre>
</li>
</ol>
<p><strong>Explanation</strong>:
This example works because <code>Point</code> is defined with a generic type <code>a</code> (<code>newtype Point a</code>), allowing it to hold any type, including functions like <code>Int -&gt; Int</code>. The <code>Show a =&gt; Show (Point a)</code> instance depends on the <code>Show</code> instance for <code>a</code>, ensuring that the <code>x</code> and <code>y</code> fields (e.g., integers or functions) can be converted to strings for display. This is an instance dependency, similar to how <code>Show (Array a)</code> requires <code>Show a</code>, as seen in Chapter 6. In the expression <code>pure (\n -&gt; n * 2) &lt;*&gt; Point { x: 3, y: 4 }</code>:</p>
<ul>
<li><code>pure (\n -&gt; n * 2)</code> lifts the function <code>\n -&gt; n * 2 :: Int -&gt; Int</code> into <code>Point</code>, creating <code>Point { x: \n -&gt; n * 2, y: \n -&gt; n * 2 } :: Point (Int -&gt; Int)</code>.</li>
<li>The <code>&lt;*&gt;</code> operator (from <code>Apply</code>) applies this <code>Point</code> of functions to <code>Point { x: 3, y: 4 } :: Point Int</code>, producing <code>Point { x: (\n -&gt; n * 2) 3, y: (\n -&gt; n * 2) 4 } = Point { x: 6, y: 8 }</code>.</li>
<li>The <code>Show</code> instance for <code>Point Int</code> relies on <code>Show Int</code> to display <code>(Point 6 8)</code>. This flexibility makes <code>Point</code> a useful example of how Applicatives can work with custom types, mirroring JavaScript’s ability to transform objects but with type safety.</li>
</ul>
<p>Expected output:</p>
<pre><code>(Point 6 8)
unit
</code></pre>
<h3 id="summary"><a class="header" href="#summary">Summary</a></h3>
<p>JavaScript’s manual validation and <code>null</code> checks for combining form inputs are repetitive and risk runtime errors. PureScript’s <code>Applicative</code> type class, with <code>pure</code> lifting functions into containers like <code>Maybe</code>, arrays, or <code>Aff</code>, provides a type-safe, reusable way to apply functions to values in other containers. For JavaScript developers, <code>Applicative</code> simplifies combining data across diverse structures, catching errors early and reducing custom code.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Functor.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="Traversable_functor.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Functor.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="Traversable_functor.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
